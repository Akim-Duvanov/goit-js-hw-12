{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nexport {createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton};\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMore = document.querySelector(\".load-more\");\nconst lightbox = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250,\n        });\n\nfunction createGallery(images) {\n    gallery.insertAdjacentHTML(\"beforeend\", images.map(elem => `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=${elem.largeImageURL}>\n                <img\n                    class=\"gallery-image\"\n                    src=\"${elem.webformatURL}\"\n                    alt=\"${elem.tags}\"\n                />\n                <ul class=\"card-info\">\n                    <li>likes:${elem.likes}</li>\n                    <li>views:${elem.views}</li>\n                    <li>comments:${elem.comments}</li>\n                    <li>downloads:${elem.downloads}</li>\n                </ul>\n            </a>\n        </li>\n    `).join(\"\"));\n    lightbox.refresh();\n}\n    \nfunction clearGallery() {\n    gallery.innerHTML = '';\n    lightbox.refresh();\n}\n\nfunction showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\nfunction hideLoader() {\n    loader.classList.add(\"hidden\");\n}\n\nfunction showLoadMoreButton() {\n    loadMore.classList.remove(\"hidden\");\n}\n\nfunction hideLoadMoreButton() {\n    loadMore.classList.add(\"hidden\");\n}","import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nexport {getImagesByQuery};\n\nasync function getImagesByQuery(query, page) {\n    const searchParams = new URLSearchParams({\n        key: '50857133-3b0b39e0288c55ff632440828',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: limit\n    });\n\n    try {\n        const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n\t\tif(response.data.hits.length === 0) {\n            iziToast.error({\n                title: 'error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n            return null;\n        } else { \n            const images = response.data.hits;\n            const totalHits = response.data.totalHits;\n            return { images, totalHits };\n        } \n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: `message: ${error.message}`,\n        });\n        return null;\n    }\n}","import {createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton} from './js/render-functions.js';\nimport {getImagesByQuery} from './js/pixabay-api.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport './css/styles.css';\n\nconst form = document.querySelector(\".form\");\nconst queryCatcher = form.elements[\"search-text\"];\nconst loadMore = document.querySelector(\".load-more\");\nlet pageCounter = 1;\nlet queryStorage = '';\nconst limit = 15;\n\nform.addEventListener(\"submit\", handleSubmit);\nloadMore.addEventListener(\"click\", handleClick);\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    pageCounter = 1;\n    if(queryCatcher.value.trim() === \"\") {\n        iziToast.warning({\n            title: 'Warning',\n            message: 'empty query',\n        });\n        return;\n    } \n    queryStorage = queryCatcher.value.trim();\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n    try {\n        const {images, totalHits} = await getImagesByQuery(queryStorage, pageCounter);\n        const totalPages = Math.ceil(totalHits / limit);\n        if(images.length === 0) {\n            iziToast.error({\n                title: 'error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n        } else {\n            createGallery(images);\n            showLoadMoreButton();\n            if(page >= totalPages) {\n                iziToast.warning({\n                    title: 'warning',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                });\n                hideLoadMoreButton();\n            }\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'failed to fetch images',\n        });\n        return null;\n    }\n    hideLoader();\n}\n\nasync function handleClick(event) {\n    event.preventDefault();\n    pageCounter += 1;\n    hideLoadMoreButton();\n    showLoader();\n    try {\n        const {images, totalHits} = await getImagesByQuery(queryStorage, pageCounter);\n        const totalPages = Math.ceil(totalHits / limit);\n        if(images.length === 0) {\n            iziToast.error({\n                title: 'error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n        } else {\n            createGallery(images);\n            showLoadMoreButton();\n            if(page >= totalPages) {\n                iziToast.warning({\n                    title: 'warning',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                });\n                hideLoadMoreButton();\n            }\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'failed to fetch images',\n        });\n    }\n    hideLoader();\n}"],"names":["gallery","loader","loadMore","lightbox","SimpleLightbox","createGallery","images","elem","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","getImagesByQuery","query","page","searchParams","response","axios","iziToast","totalHits","error","form","queryCatcher","pageCounter","queryStorage","limit","handleSubmit","handleClick","event","totalPages"],"mappings":"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"}